<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Madman's"><title> | Trtmu</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.1"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Trtmu</h1><a id="logo" href="/.">Trtmu</a><p class="description">2018/09/17</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title"></h1><div class="post-meta">Sep 17, 2018<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><h4 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h4><h4 id="阿里云服务器相关"><a href="#阿里云服务器相关" class="headerlink" title="阿里云服务器相关"></a>阿里云服务器相关</h4><ul>
<li>云服务器 ip 47.94.254.119<ul>
<li>linux用户 root/1111  123/123</li>
</ul>
</li>
<li>云数据库 ip 59.110.205.98 <ul>
<li>用户名 root/Liu844700</li>
<li>远程连接云数据库:<br>  mysql -pmysql -h59.110.205.98 -P3306 -uroot1 -p1111<br>  mysql -pmysql -h59.110.205.98 -P3306 -uroot -pLiu844700</li>
</ul>
</li>
<li>vsftp服务器用户  vsftpd/1111</li>
</ul>
<p>查看8080端口是否占用 netstat -anp|grep 8080<br>杀死进程 kill -9  pid<br>实时查看tomcat运行日志 tail -f catalina.out<br>以服务方式启动tomcat nohup ./startup.sh &amp;<br>nginx服务实现停止、启动、重启的动作如下：<br>systemctl stop  nginx.service<br>systemctl start  nginx.service<br>systemctl restart nginx.service<br>检查服务状态<br>systemctl status nginx.service<br>使服务开机启动<br>systemctl enable nginx.service<br>取消服务开机启动<br>systemctl disable nginx.service  </p>
<p>linux常用命令<br>一、文件处理命令</p>
<p>cd /home 进入 ‘/ home’ 目录’<br>cd .. 返回上一级目录<br>cd ../.. 返回上两级目录<br>cd 进入个人的主目录<br>cd ~user1 进入个人的主目录<br>cd - 返回上次所在的目录 </p>
<p>pwd 显示工作路径 </p>
<p>ls 查看目录中的文件<br>ls -F 查看目录中的文件<br>ls -l 显示文件和目录的详细资料<br>ls -a 显示隐藏文件<br>ls [0-9] 显示包含数字的文件名和目录名 </p>
<p>tree 显示文件和目录由根目录开始的树形结构(1)<br>lstree 显示文件和目录由根目录开始的树形结构(2) </p>
<p>mkdir dir1 创建一个叫做 ‘dir1’ 的目录’<br>mkdir dir1 dir2 同时创建两个目录<br>mkdir -p /tmp/dir1/dir2 创建一个目录树 </p>
<p>rm -f file1 删除一个叫做 ‘file1’ 的文件’<br>rmdir dir1 删除一个叫做 ‘dir1’ 的目录’<br>rm -rf dir1 删除一个叫做 ‘dir1’ 的目录并同时删除其内容<br>rm -rf dir1 dir2 同时删除两个目录及它们的内容<br>mv dir1 new_dir 重命名/移动 一个目录 </p>
<p>cp file1 file2 复制一个文件<br>cp dir/* . 复制一个目录下的所有文件到当前工作目录<br>cp -a /tmp/dir1 . 复制一个目录到当前工作目录<br>cp -a dir1 dir2 复制一个目录 </p>
<p>ln -s file1 lnk1 创建一个指向文件或目录的软链接<br>ln file1 lnk1 创建一个指向文件或目录的物理链接<br>touch -t 0712250000 file1 修改一个文件或目录的时间戳 - (YYMMDDhhmm)<br>file file1 outputs the mime type of the file as text<br>iconv -l 列出已知的编码 </p>
<p>二、权限管理命令</p>
<p>用户组<br>在linux中的每个用户必须属于一个组，不能独立于组外。在linux中每个文件有所有者、所在组、其它组的概念<br>【所有者】<br>一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者<br>用ls ‐ahl命令可以看到文件的所有者<br>也可以使用chown用户名 文件名 来修改文件的所有者<br>【文件所在组】<br>当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组<br>用ls ‐ahl命令可以看到文件的所有组<br>也可以使用chgrp 组名 文件名来修改文件所在的组<br>【其它组】<br>除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组<br>【文件权限】<br>ls -l中显示的内容如下：<br>-rwxrw-r‐-1 root root 1213 Feb 2 09:39 abc<br>10个字符确定不同用户能对文件干什么<br>第一个字符代表文件（-）、目录（d），链接（l）<br>其余字符每3个一组（rwx），读（r）、写（w）、执行（x）<br>第一组rwx：文件所有者的权限是读、写和执行<br>第二组rw-：与文件所有者同一组的用户的权限是读、写但不能执行<br>第三组r–：不与文件所有者同组的其他用户的权限是读不能写和执行<br>也可用数字表示为：r=4，w=2，x=1  因此rwx=4+2+1=7<br>1 表示连接的文件数<br> root 表示用户<br> root表示用户所在的组<br> 1213 表示文件大小（字节）<br> Feb 2 09:39 表示最后修改日期<br>-abc表示文件名<br>改变权限的命令<br>chmod改变文件或目录的权限<br>chmod 755 abc：赋予abc权限rwxr-xr-x<br>chmod u=rwx，g=rx，o=rx abc：同上u=用户权限，g=组权限，o=不同组其他用户权限<br>chmod u-x，g+w abc：给abc去除用户执行的权限，增加组写的权限<br>chmod a+r abc：给所有用户添加读的权限<br>改变所有者（chown）和用户组（chgrp）命令<br>chown xiaoming abc：改变abc的所有者为xiaoming<br>chgrp root abc：改变abc所属的组为root<br>chown root ./abc：改变abc这个目录的所有者是root<br>chown ‐R root ./abc：改变abc这个目录及其下面所有的文件和目录的所有者是root<br>【改变用户所在组】<br>在添加用户时，可以指定将该用户添加到哪个组中，同样用root的管理权限可以改变某个用户所在的组<br>usermod ‐g 组名 用户名<br>你可以用<br>usermod ‐d 目录名 用户名，改变该用户登录的初始目录<br>【综合案例】<br>【题1.1】建立两个用户组group1和group2，以及三个用户dennis、daniel、abigale，并且将前2个用户分配在group1用户组下，后一个分配在group2用户组下<br>【题1.2】以dennis用户登录，创建一个Hello.java文件<br>【题1.3】以daniel用户登录，观察是否可以访问/home/dennis目录以及读或写其创建的Hello.java文件<br>【题1.4】以dennis用户登录，修改目录/home/dennis及Hello.java文件的读写权限（更正：修改目录权限的时候，应该使用770，而不是760，否则权限不足）<br>【题1.5】重复【题1.3】<br>【题1.6】改变abigale的用户组由group2变为group1<br>然后，可以使用cat /etc/passwd查看并确定</p>
<p>三、帮助命令<br>    type cd    遇到陌生命令可以看到系统给出的解释</p>
<pre><code>ls –help    查看命令所支持的参数说明

help ls     获得 ls 命令的帮助文档

man cd    查看某命令的正式文档

which cd  查看cd命令的所在位置
</code></pre><p>四、文件搜索命令<br>    find / -name file1 从 ‘/’ 开始进入根文件系统搜索文件和目录 </p>
<pre><code>find / -user user1 搜索属于用户 ‘user1’ 的文件和目录 

find /home/user1 -name *.bin 在目录 ‘/ home/user1’ 中搜索带有’.bin’ 结尾的文件 

find /usr/bin -type f -atime +100 搜索在过去100天内未被使用过的执行文件 

find /usr/bin -type f -mtime -10 搜索在10天内被创建或者修改过的文件 

find / -name *.rpm -exec chmod 755 ‘{}’ \; 搜索以 ‘.rpm’ 结尾的文件并定义其权限 

find / -xdev -name *.rpm 搜索以 ‘.rpm’ 结尾的文件，忽略光驱、捷盘等可移动设备 

locate *.ps 寻找以 ‘.ps’ 结尾的文件 - 先运行 ‘updatedb’ 命令 

whereis halt 显示一个二进制文件、源码或man的位置 

which halt 显示一个二进制文件或可执行文件的完整路径 
</code></pre><p>五、压缩解压命令</p>
<p>六、命令使用技巧<br>    date 显示系统日期<br>arch 显示机器的处理器架构(1)<br>uname -m 显示机器的处理器架构(2)<br>uname -r 显示正在使用的内核版本<br>dmidecode -q 显示硬件系统部件 - (SMBIOS / DMI)<br>hdparm -i /dev/hda 罗列一个磁盘的架构特性<br>hdparm -tT /dev/sda 在磁盘上执行测试性读取操作<br>cat /proc/cpuinfo 显示CPU info的信息<br>cat /proc/interrupts 显示中断<br>cat /proc/meminfo 校验内存使用<br>cat /proc/swaps 显示哪些swap被使用<br>cat /proc/version 显示内核的版本<br>cat /proc/net/dev 显示网络适配器及统计<br>cat /proc/mounts 显示已加载的文件系统<br>lspci -tv 罗列 PCI 设备<br>lsusb -tv 显示 USB 设备 </p>
<p>cal 2007 显示2007年的日历表<br>date 041217002007.00 设置日期和时间 - 月日时分年.秒<br>clock -w 将时间修改保存到 BIOS<br>关机 (系统的关机、重启以及登出 )<br>shutdown -h now 关闭系统(1)<br>init 0 关闭系统(2)<br>telinit 0 关闭系统(3)<br>shutdown -h hours:minutes &amp; 按预定时间关闭系统<br>shutdown -c 取消按预定时间关闭系统<br>shutdown -r now 重启(1)<br>reboot 重启(2)<br>logout 注销 </p>
<p>七、VIM使⽤<br>    【vi的模式】<br> 命令模式：vi启动默认进入的模式，可进入输入模”i”，或末行模式（:），除了可以完成命令的功能外，也是后两种模式的转换点<br> 输入模式：即文本辑辑状态，最后一行显示”– INSERT –”提示，按ESC返回到命令模式<br> 末行模式：可完成一些复杂操作，以”:”开始，执行完一个末行命令后自动返回命令模式<br>【基本使用】<br>1.vi 编辑器的启动与退出：<br> (1).使用命令”vi”直接进入编辑环境<br> (2).在命令模式下输入”:q!”，可以强行退出编辑环境，对文件修改不进行保存<br> (3).以文件名作为”vi”命令的参数时，若存在此文件，则vi可对内容进行编辑，若不存在，打开以参数名命名的空文件</p>
<p> 2.文件操作：</p>
<p> (1).打开新文件：在末行模式下”:e filename”关闭当前文件并打开新文件，”:e! filename 强制关闭当前文件并打开新文件”<br> (2).读取文件内容到当前文件：”:r filename”，读取的文件内容粘贴到当前文件光标所在行的下面<br> (3)保存文件：命令为”:w [filename]”，如果文件已经命名，可直接使用”:w”命令的参数，如果没有命名，第一次保存时需指定文件名作为参数<br> (4).另存为文件：命令为”:w filename”，只保存到新文件，而不更新原来文件的内容<br> (5).退出vi编辑器：退出格式为”:q”，保存并退出为”:wq”，强行退出为”:q!”</p>
<p> 3.光标的移动操作(命令模式下)</p>
<p> (1).光标方向移动：”h”左、”l”右、”k”上、”j”下<br> (2).翻页移动：”ctrl+f”前一页、”ctrl+b”后一页、”ctrl+u”前半页、”ctrl+d”后半页<br> (3).行内快速跳转：”^”本行首字符、”$”本行尾字符、”w”后一单词首字母、”b”前一单词首字母、”e”后一单词尾字母；可添加数字组合使用，例如：”3w”后三个单词首字母、”4b”前4个单词首字母、”5e”后5个单词尾字母<br> (4).文件内行间跳转：显示行号”:set nu”，取消显示行号”:set nonu”，”1G”跳转到首行，”G”跳转到末尾行，”#G”跳转到第#行</p>
<p> 4.编辑操作</p>
<p> (1).进行输入模式：”i”当前光标处，”a”当前光标后，”A”当前行末，”o”当前行下插入新行，”O”当前行上插入新行，”cw”删除当前光标到所在尾部字符，<br>   “c$”删除当前光标到行尾的字符，”c^”删除当前光标(不包括)之前到行首的字符；以上记忆如有困难，可只记”i”从命令模式进入输入模式，完成编辑后”Esc”退回到命令模式<br> (2).输入模式的操作：上下左右方向进行光标移动，”Home/End”定位光标到行首行尾，”Page Up /Down”上下翻页，”Backspace”左侧字符的删除，”Delete”删除光标位置的字符<br> (3).删除操作：在命令模式下，可用以下命令完成删除操作，”x”光标处单个字符，”dd”光标所在行，”dw”当前字符到单词尾（含空格），”de”当前字符到单词尾（不含空格），<br>     “d$”当前字符到行尾，”d^”当前字符到行首，”J”合并当前行与下一行的内容，可添加数字配合使用，例如”3x”当前光标向右3个字符，”2dd”从当前行开始向下两行文本，<br>     “3dw”当前光标向右3个单词，”2de”当前光标向右两个单词（保留一个空格），”5J”合并5行文本<br> (4).撤销操作：在命令模式下，”u”取消最近一次操作，可重复使用，”U”取消对当前行进行的所有操作，”Ctrl+R”对”u”产生的撤消进行恢复<br> (5).复制操作：”yy”整行，”yw”光标到单词尾，”y$”光标到行尾，”y^”光标到行首；与数字组合使用，”5yy”当前及后续共5行，”3yw”当前光标开始的3个单词；<br>末行命令”:m,ny”m行到n行之间的文本，例如：”:100,200y”100行到200的内容<br> (6).粘贴操作：在命令模式下，使用”p”将缓冲区中的内容粘贴到当前文档</p>
<p> 5.查找与替换操作(末行模式)</p>
<p> (1).自上而下：”:/word”查找指定的字符串，”n”查找下一个（自上而下）”N”反向查找下一个（自下而上）<br> (2).自下而上：”:?word”自下而上查找指定字符串，”n”查找下一个（自下而上）”N”反向查找下一个（自上而下）<br> (3).普通替换：”:s/old/new”由s开始，”old”指被替换的字符串，”new”替换成哪个字符串，此命令只替换当前行中第一个匹配的字符串<br> (4).行内全部替换：”:s/old/new/g”，当前行内所有匹配的字符串<br> (5).在行区域内进行替换：”:#,#s/old/new/g”，”#,#”表示两个行号之间的行区域，例如”3,5”表示第3行到第5行<br> (6).整个文件内的替换操作：”:%s/old/new/g”，加%表示整篇文档，危险，慎用<br> (7).使用替换确认功能：在原替换命令后加”c”可提供确认功能，例如：”:s/old/new/c”，”:s/old/new/gc”，”:#,#s/old/new/gc”，”:%s/old/new/gc”；<br>替换命令确认后的提示为”replace with word (y/n/a/q/l/^E/^Y) ?”，其中”y”替换，”n”放弃，”a”所有，”q”退出</p>
<p>八、软件包管理<br>rpm -ivh package.rpm 安装一个rpm包<br>rpm -ivh –nodeeps package.rpm 安装一个rpm包而忽略依赖关系警告<br>rpm -U package.rpm 更新一个rpm包但不改变其配置文件<br>rpm -F package.rpm 更新一个确定已经安装的rpm包<br>rpm -e package_name.rpm 删除一个rpm包<br>rpm -qa 显示系统中所有已经安装的rpm包<br>rpm -qa | grep httpd 显示所有名称中包含 “httpd” 字样的rpm包<br>rpm -qi package_name 获取一个已安装包的特殊信息<br>rpm -qg “System Environment/Daemons” 显示一个组件的rpm包<br>rpm -ql package_name 显示一个已经安装的rpm包提供的文件列表<br>rpm -qc package_name 显示一个已经安装的rpm包提供的配置文件列表<br>rpm -q package_name –whatrequires 显示与一个rpm包存在依赖关系的列表<br>rpm -q package_name –whatprovides 显示一个rpm包所占的体积<br>rpm -q package_name –scripts 显示在安装/删除期间所执行的脚本l<br>rpm -q package_name –changelog 显示一个rpm包的修改历史<br>rpm -qf /etc/httpd/conf/httpd.conf 确认所给的文件由哪个rpm包所提供<br>rpm -qp package.rpm -l 显示由一个尚未安装的rpm包提供的文件列表<br>rpm –import /media/cdrom/RPM-GPG-KEY 导入公钥数字证书<br>rpm –checksig package.rpm 确认一个rpm包的完整性<br>rpm -qa gpg-pubkey 确认已安装的所有rpm包的完整性<br>rpm -V package_name 检查文件尺寸、 许可、类型、所有者、群组、MD5检查以及最后修改时间<br>rpm -Va 检查系统中所有已安装的rpm包- 小心使用<br>rpm -Vp package.rpm 确认一个rpm包还未安装<br>rpm2cpio package.rpm | cpio –extract –make-directories bin 从一个rpm包运行可执行文件<br>rpm -ivh /usr/src/redhat/RPMS/arch/package.rpm 从一个rpm源码安装一个构建好的包<br>rpmbuild –rebuild package_name.src.rpm 从一个rpm源码构建一个 rpm 包 </p>
<p>九、⽤户和⽤户组管理<br>groupadd group_name 创建一个新用户组 </p>
<p>groupdel group_name 删除一个用户组 </p>
<p>groupmod -n new_group_name old_group_name 重命名一个用户组 </p>
<p>useradd -c “Name Surname ” -g admin -d /home/user1 -s /bin/bash user1 创建一个属于 “admin” 用户组的用户 </p>
<p>useradd -g groupname  user1 创建一个新用户 </p>
<p>userdel -r user1 删除一个用户 ( ‘-r’ 排除主目录) </p>
<p>usermod -c “User FTP” -g system -d /ftp/user1 -s /bin/nologin user1 修改用户属性 </p>
<p>passwd 修改口令 </p>
<p>passwd user1 修改一个用户的口令 (只允许root执行) </p>
<p>chage -E 2005-12-31 user1 设置用户口令的失效期限 </p>
<p>pwck 检查 ‘/etc/passwd’ 的文件格式和语法修正以及存在的用户 </p>
<p>grpck 检查 ‘/etc/passwd’ 的文件格式和语法修正以及存在的群组 </p>
<p>newgrp group_name 登陆进一个新的群组以改变新创建文件的预设群组 </p>
<p>十、服务和进程</p>
<pre><code>ps     查看进程
</code></pre><p> kill   进程号   杀死指定进程<br>systemctl命令：<br>语法：systemctl [OPTIONS…] COMMAND [SERVICE_NAME.service…]</p>
<p><1>启动：service SERVICE_NAME start ==&gt;systemctl start SERVICE_NAME.service</1></p>
<p><2>停止：service SERVICE_NAME stop ==&gt;systemctl stop SERVICE_NAME.service</2></p>
<p><3>重启：service SERVICE_NAME restart ==&gt; systemctl restart SERVICE_NAME.service</3></p>
<p><4>状态：service SERVICE_NAME status ==&gt; systemctl status SERVICE_NAME.service</4></p>
<p>十一、基本⽹络设置<br>    ifconfig<br>    echo $PATH<br>    用find命令也没找到ifconfig<br>    find / -name “ifconfig”<br>    linux已经用ip命令代替ifconfig命令，<br>        用yum install net-tools安装net-tools组件，将ifconfig命令找回来</p>
<pre><code>打印网络配置信息
cat /etc/sysconfig/network-scripts/ifcfg-enp3s0

启动和关闭网卡命令
ifup、ifdown

重启网络服务
/etc/init.d/network restart 
和
service network restart
</code></pre><p>ip  [选项]  操作对象{link|addr|route…}</p>
<h1 id="ip-link-show-显示网络接口信息"><a href="#ip-link-show-显示网络接口信息" class="headerlink" title="ip link show  # 显示网络接口信息"></a>ip link show  # 显示网络接口信息</h1><h1 id="ip-link-set-eth0-upi-开启网卡"><a href="#ip-link-set-eth0-upi-开启网卡" class="headerlink" title="ip link set eth0 upi           # 开启网卡"></a>ip link set eth0 upi           # 开启网卡</h1><h1 id="ip-link-set-eth0-down-关闭网卡"><a href="#ip-link-set-eth0-down-关闭网卡" class="headerlink" title="ip link set eth0 down          # 关闭网卡"></a>ip link set eth0 down          # 关闭网卡</h1><h1 id="ip-link-set-eth0-promisc-on-开启网卡的混合模式"><a href="#ip-link-set-eth0-promisc-on-开启网卡的混合模式" class="headerlink" title="ip link set eth0 promisc on      # 开启网卡的混合模式"></a>ip link set eth0 promisc on      # 开启网卡的混合模式</h1><h1 id="ip-link-set-eth0-promisc-offi-关闭网卡的混个模式"><a href="#ip-link-set-eth0-promisc-offi-关闭网卡的混个模式" class="headerlink" title="ip link set eth0 promisc offi     # 关闭网卡的混个模式"></a>ip link set eth0 promisc offi     # 关闭网卡的混个模式</h1><h1 id="ip-link-set-eth0-txqueuelen-1200-设置网卡队列长度"><a href="#ip-link-set-eth0-txqueuelen-1200-设置网卡队列长度" class="headerlink" title="ip link set eth0 txqueuelen 1200   # 设置网卡队列长度"></a>ip link set eth0 txqueuelen 1200   # 设置网卡队列长度</h1><h1 id="ip-link-set-eth0-mtu-1400-设置网卡最大传输单元"><a href="#ip-link-set-eth0-mtu-1400-设置网卡最大传输单元" class="headerlink" title="ip link set eth0 mtu 1400        # 设置网卡最大传输单元"></a>ip link set eth0 mtu 1400        # 设置网卡最大传输单元</h1><h1 id="ip-addr-show-显示网卡IP信息"><a href="#ip-addr-show-显示网卡IP信息" class="headerlink" title="ip addr show                # 显示网卡IP信息"></a>ip addr show                # 显示网卡IP信息</h1><h1 id="ip-addr-add-192-168-0-1-24-dev-eth0-设置eth0网卡IP地址192-168-0-1"><a href="#ip-addr-add-192-168-0-1-24-dev-eth0-设置eth0网卡IP地址192-168-0-1" class="headerlink" title="ip addr add 192.168.0.1/24 dev eth0 # 设置eth0网卡IP地址192.168.0.1"></a>ip addr add 192.168.0.1/24 dev eth0 # 设置eth0网卡IP地址192.168.0.1</h1><h1 id="ip-addr-del-192-168-0-1-24-dev-eth0-删除eth0网卡IP地址"><a href="#ip-addr-del-192-168-0-1-24-dev-eth0-删除eth0网卡IP地址" class="headerlink" title="ip addr del 192.168.0.1/24 dev eth0 # 删除eth0网卡IP地址"></a>ip addr del 192.168.0.1/24 dev eth0 # 删除eth0网卡IP地址</h1><h1 id="ip-route-list-查看路由信息"><a href="#ip-route-list-查看路由信息" class="headerlink" title="ip route list                 # 查看路由信息"></a>ip route list                 # 查看路由信息</h1><h1 id="ip-route-add-192-168-4-0-24-via-192-168-0-254-dev-eth0-设置192-168-4-0网段的网关为192-168-0-254-数据走eth0接口"><a href="#ip-route-add-192-168-4-0-24-via-192-168-0-254-dev-eth0-设置192-168-4-0网段的网关为192-168-0-254-数据走eth0接口" class="headerlink" title="ip route add 192.168.4.0/24  via  192.168.0.254 dev eth0 # 设置192.168.4.0网段的网关为192.168.0.254,数据走eth0接口"></a>ip route add 192.168.4.0/24  via  192.168.0.254 dev eth0 # 设置192.168.4.0网段的网关为192.168.0.254,数据走eth0接口</h1><h1 id="ip-route-add-default-via-192-168-0-254-dev-eth0-设置默认网关为192-168-0-254"><a href="#ip-route-add-default-via-192-168-0-254-dev-eth0-设置默认网关为192-168-0-254" class="headerlink" title="ip route add default via  192.168.0.254  dev eth0    # 设置默认网关为192.168.0.254"></a>ip route add default via  192.168.0.254  dev eth0    # 设置默认网关为192.168.0.254</h1><h1 id="ip-route-del-192-168-4-0-24-删除192-168-4-0网段的网关"><a href="#ip-route-del-192-168-4-0-24-删除192-168-4-0网段的网关" class="headerlink" title="ip route del 192.168.4.0/24      # 删除192.168.4.0网段的网关"></a>ip route del 192.168.4.0/24      # 删除192.168.4.0网段的网关</h1><h1 id="ip-route-del-default-删除默认路由"><a href="#ip-route-del-default-删除默认路由" class="headerlink" title="ip route del default          # 删除默认路由"></a>ip route del default          # 删除默认路由</h1><p>VirtualBox的提供了四种网络接入模式，它们分别是：<br>1、NAT 网络地址转换模式(NAT,Network Address Translation)<br>2、Bridged Adapter 桥接模式<br>3、Internal 内部网络模式<br>4、Host-only Adapter 主机模式 </p>
<p>第一种 NAT模式<br>解释：<br>NAT模式是最简单的实现虚拟机上网的方式，你可以这样理解：Vhost访问网络的所有数据都是由主机提供的，vhost并不真实存在于网络中，主机与网络中的任何机器都不能查看和访问到Vhost的存在。<br>虚拟机与主机关系：<br>只能单向访问，虚拟机可以通过网络访问到主机，主机无法通过网络访问到虚拟机。<br>虚拟机与网络中其他主机的关系：<br>只能单向访问，虚拟机可以访问到网络中其他主机，其他主机不能通过网络访问到虚拟机。<br>虚拟机与虚拟机之间的关系：<br>相互不能访问，虚拟机与虚拟机各自完全独立，相互间无法通过网络访问彼此。<br>IP:10.0.2.15<br>网关：10.0.2.2<br>DNS：10.0.2.3<br>一台虚拟机的多个网卡可以被设定使用 NAT， 第一个网卡连接了到专用网 10.0.2.0，第二个网卡连接到专用网络 10.0.3.0，等等。默认得到的客户端ip（IP Address）是10.0.2.15，网关（Gateway）是10.0.2.2，域名服务器（DNS）是10.0.2.3，可以手动参考这个进行修改。<br>NAT方案优缺点：<br>笔记本已插网线时： 虚拟机可以访问主机，虚拟机可以访问互联网，在做了端口映射后（最后有说明），主机可以访问虚拟机上的服务（如数据库）。<br>笔记本没插网线时： 主机的“本地连接”有红叉的，虚拟机可以访问主机，虚拟机不可以访问互联网，在做了端口映射后，主机可以访问虚拟机上的服务（如数据库）。 </p>
<p>第二种 Bridged Adapter模式<br>解释：<br>网桥模式是我最喜欢的用的一种模式，同时，模拟度也是相当完美。你可以这样理解，它是通过主机网卡，架设了一条桥，直接连入到网络中了。因此，它使得虚拟机能被分配到一个网络中独立的IP，所有网络功能完全和在网络中的真实机器一样。<br>虚拟机与主机关系：<br>可以相互访问，因为虚拟机在真实网络段中有独立IP，主机与虚拟机处于同一网络段中，彼此可以通过各自IP相互访问。<br>虚拟机于网络中其他主机关系：<br>可以相互访问，同样因为虚拟机在真实网络段中有独立IP，虚拟机与所有网络其他主机处于同一网络段中，彼此可以通过各自IP相互访问。<br>虚拟机于虚拟机关系：<br>可以相互访问，原因同上。<br>IP：一般是DHCP分配的，与主机的“本地连接”的IP 是同一网段的。虚拟机就能与主机互相通信。<br>笔记本已插网线时：（若网络中有DHCP服务器）主机与虚拟机会通过DHCP分别得到一个IP，这两个IP在同一网段。 主机与虚拟机可以ping通，虚拟机可以上互联网。<br>笔记本没插网线时：主机与虚拟机不能通信。主机的“本地连接”有红叉，就不能手工指定IP。虚拟机也不能通过DHCP得到IP地址，手工指定IP后，也无法与主机通信，因为主机无IP。<br>这时主机的VirtualBox Host-Only Network 网卡是有ip的，192.168.56.1。虚拟机就算手工指定了IP 192.168.56.*，也ping不能主机。 </p>
<p>第三种 Internal模式<br>解释：<br>内网模式，顾名思义就是内部网络模式，虚拟机与外网完全断开，只实现虚拟机于虚拟机之间的内部网络模式。<br>虚拟机与主机关系：<br>不能相互访问，彼此不属于同一个网络，无法相互访问。<br>虚拟机与网络中其他主机关系：<br>不能相互访问，理由同上。<br>虚拟机与虚拟机关系：<br>可以相互访问，前提是在设置网络时，两台虚拟机设置同一网络名称。如上配置图中，名称为intnet。<br>IP: VirtualBox的DHCP服务器会为它分配IP ，一般得到的是192.168.56.101，因为是从101起分的，也可手工指定192.168.56.*。<br>笔记本已插网线时：虚拟机可以与主机的VirtualBox Host-Only Network 网卡通信<br>这种方案不受主机本地连接（网卡）是否有红叉的影响。 </p>
<p>第四种 Host-only Adapter模式<br>解释：<br>主机模式，这是一种比较复杂的模式，需要有比较扎实的网络基础知识才能玩转。可以说前面几种模式所实现的功能，在这种模式下，通过虚拟机及网卡的设置都可以被实现。<br>我们可以理解为Vbox在主机中模拟出一张专供虚拟机使用的网卡，所有虚拟机都是连接到该网卡上的，我们可以通过设置这张网卡来实现上网及其他很多功能，比如（网卡共享、网卡桥接等）。<br>虚拟机与主机关系<br>默认不能相互访问，双方不属于同一IP段，host-only网卡默认IP段为192.168.56.X 子网掩码为255.255.255.0，后面的虚拟机被分配到的也都是这个网段。通过网卡共享、网卡桥接等，可以实现虚拟机于主机相互访问。<br>虚拟机与网络主机关系<br>默认不能相互访问，原因同上，通过设置，可以实现相互访问。<br>虚拟机与虚拟机关系<br>默认可以相互访问，都是同处于一个网段。<br>虚拟机访问主机 用的是主机的VirtualBox Host-Only Network网卡的IP：192.168.56.1 ，不管主机“本地连接”有无红叉，永远通。<br>主机访问虚拟机，用是的虚拟机的网卡3的IP： 192.168.56.101 ，不管主机“本地连接”有无红叉，永远通。<br>虚拟机访问互联网，用的是自己的网卡2， 这时主机要能通过“本地连接”有线上网，（无线网卡不行） </p>
<p>通过对以上几种网络模式的了解，我们就可以灵活运用，模拟组建出我们所想要的任何一种网络环境了。<br>比如我想模拟出来一个一台主机，监控一个局域网上网情况的网络环境。<br>首先我开启了两台虚拟机vhost1与vhost2，当然如果硬件允许，我同样可以再增加vhost3、vhost4…<br>所有的vhost我都设置成internat内网模式，网络名称为intnal，网关为192.168.56.100，意思就是通过 192.168.56.100网卡上网。其中有一台vhost1我设置为双网卡，一张为内网模式（192.168.56.100），一张为网桥模式（192.168.1.101）。两张网卡设置双网卡共享上网<br>虚拟机之间为局域网，其中有一台虚拟机vhost1通过与外网相连，所有局域网中的虚拟机又通过vhost1来实现上外网。这样vhost1就可以监控整个虚拟机局域网上网情况了。 </p>
<p>NAT 设置端口映射<br><a href="http://huzhangsheng" target="_blank" rel="noopener">http://huzhangsheng</a>.<br>你可以设置一个虚拟机的服务（比如 WEB 服务），通过使用命令行工具 VboxManage 代理。你需要知道虚拟机的服务使用哪个端口，然后决定在主机上使用哪个端口（通常但不总是想要使虚拟机和主机使用同一个端口）。在主机上提供一个服务需要使用一个端口，你能使用在主机上没有准备用来提供服务的任何端口。一个怎样设置新的 NAT 例子，在虚拟机上连接到一个 ssh 服务器，需要下面的三个命令：<br>VBoxManage setextradata ‘Linux Guest’ ‘VBoxInternal/Devices/pcnet/0/LUN#0/Config/guestssh/Protocol’ TCP<br>VBoxManage setextradata ‘Linux Guest’ ‘VBoxInternal/Devices/pcnet/0/LUN#0/Config/guestssh/GuestPort’ 22<br>VBoxManage setextradata ‘Linux Guest’ ‘VBoxInternal/Devices/pcnet/0/LUN#0/Config/guestssh/HostPort’ 2222<br>说明：VboxManage 是一个命令行程序，请查询你的 VirtualBox 安装目录，’Linux Guest’ 是虚拟主机名。guestssh 是一个自定义的名称，你可以任意设置，通过上面的三个命令，把虚拟机的 22 端口 转发到主机的 2222 端口。<br>又比如，我在虚拟机 debian 上安装了 apache2 服务器，使用 80 端口，映射到主机的 80 端口。使用下面的命令。<br>‘C:\Program Files\innotek VirtualBox\VBoxManage.exe’ setextradata ‘debian’ ‘VBoxInternal/Devices/pcnet/0/LUN#0/Config/huzhangsheng/Protocol’ TCP<br>‘C:\Program Files\innotek VirtualBox\VBoxManage.exe’ setextradata ‘debian’ ‘VBoxInternal/Devices/pcnet/0/LUN#0/Config/huzhangsheng/GuestPort’ 80<br>‘C:\Program Files\innotek VirtualBox\VBoxManage.exe’ setextradata ‘debian’ ‘VBoxInternal/Devices/pcnet/0/LUN#0/Config/huzhangsheng/HostPort’ 80<br>注意：要使设置生效，请关掉 VirtualBox 再运行虚拟机，我把 VirtualBox 安装在 winxp 上，在虚拟机中安装 debian 4.02r ，虚拟机名是 debian ，并安装了 apache2 php5 mysql-server ，在主机上用IE浏览 <a href="http://localhost，成功转发到虚拟机" target="_blank" rel="noopener">http://localhost，成功转发到虚拟机</a> debian 的 apache2 web 服务器上 </p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2018/09/17/Redis/"></a><a class="next" href="/2018/09/17/DispatchServlet/"></a></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://yoursite.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/09/17/疑难杂症/">疑难杂症</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/17/设计模式/">设计模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/17/其他知识点/">其他知识点</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/17/反射及反射的应用/">反射及反射的应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/17/SpringData/">SpringData</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/17/solr/">solr</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/17/Shiro/">Shiro</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/17/Redis/">Redis</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/17/Linux/">Linux</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/17/DispatchServlet/">DispatchServlet</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Trtmu.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.1" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.1"></script></div></body></html>