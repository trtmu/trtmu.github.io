<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Madman's"><title> | Trtmu</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.1"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Trtmu</h1><a id="logo" href="/.">Trtmu</a><p class="description">2018/09/17</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 主页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title"></h1><div class="post-meta">Sep 17, 2018<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><h3 id="Redis-非关系型数据库"><a href="#Redis-非关系型数据库" class="headerlink" title="Redis(非关系型数据库)"></a>Redis(非关系型数据库)</h3><ul>
<li>一个高性能的可基于内存亦可持久化的日志型,Key-Value数据库</li>
</ul>
<blockquote>
<p>REmote DIctionary Server(Redis) 是一个由Salvatore Sanfilippo写的key-value存储系统。<br>Redis是一个开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。<br>它通常被称为数据结构服务器，因为值（value）可以是 字符串(String), 哈希(Map), 列表(list), 集合(sets) 和 有序集合(sorted sets)等类型。 </p>
</blockquote>
<h4 id="Redis常用命令"><a href="#Redis常用命令" class="headerlink" title="Redis常用命令"></a>Redis常用命令</h4><blockquote>
<p>Redis默认使用的端口是<font color="red">6379</font>,可在配置文件中进行修改</p>
</blockquote>
<ul>
<li>开启redis服务器<code>redis-server.exe redis.conf</code></li>
<li>使用redis客户端<code>redis-cli.exe</code>进行连接</li>
<li>客户端使用<code>ping</code>命令,可检测redis服务是否启动,如果启动则会响应<code>PONG</code></li>
<li>redis中关于键(key)的操作详见<a href="http://www.runoob.com/redis/redis-keys.html" target="_blank" rel="noopener">这里</a></li>
<li>redis中关于字符串(string)的操作详见<a href="http://www.runoob.com/redis/redis-strings.html" target="_blank" rel="noopener">这里</a></li>
<li>redis中关于哈希(Hash)的操作详见<a href="http://www.runoob.com/redis/redis-hashes.html" target="_blank" rel="noopener">这里</a></li>
<li>redis中关于列表(List)的操作详见<a href="http://www.runoob.com/redis/redis-lists.html" target="_blank" rel="noopener">这里</a></li>
<li>redis中关于集合(Set)的操作详见<a href="http://www.runoob.com/redis/redis-sets.html" target="_blank" rel="noopener">这里</a></li>
<li>redis中关于有序集合(sort set)的操作详见<a href="http://www.runoob.com/redis/redis-sorted-sets.html" target="_blank" rel="noopener">这里</a> </li>
</ul>
<h3 id="redis配置"><a href="#redis配置" class="headerlink" title="redis配置"></a>redis配置</h3><blockquote>
<p>redis配置是在redis安装目录下的redis.conf文件,可以通过CONFIG命令查看或配置</p>
</blockquote>
<ul>
<li><code>CONFIG GET *</code> 获取所有的配置信息</li>
<li><code>CONFIG GET loglevel</code> 获取日志的打印级别</li>
<li><code>CONFIG SET loglevel &quot;notice&quot;</code> 设置日志的打印级别为notive</li>
<li>reids配置中的其他参数说明见<a href="http://www.runoob.com/redis/redis-conf.html" target="_blank" rel="noopener">此处</a></li>
</ul>
<h3 id="redis的持久化机制"><a href="#redis的持久化机制" class="headerlink" title="redis的持久化机制"></a>redis的持久化机制</h3><ul>
<li>两种<ul>
<li>快照和追加方式</li>
</ul>
</li>
</ul>
<h3 id="Redis的数据类型"><a href="#Redis的数据类型" class="headerlink" title="Redis的数据类型"></a>Redis的数据类型</h3><blockquote>
<p>redis支持五种数据类型string(字符串),hash(哈希),list(列表),set(集合)及zset(sorted set：有序集合)</p>
</blockquote>
<ul>
<li><p>string(字符串)</p>
<ul>
<li>string是redis最基本的类型,一个key对应一个value,string类型是二进制安全的,意思是redis的string可以包含任何数据,比如j pg图片或序列化的对象,<font color="red">一个键最大能储存512MB</font><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SET name liu//设置key为name value是liu</span><br><span class="line">GET name //获取key为name 的value</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Hash(哈希)</p>
<ul>
<li>Redis hash是一个stirng类型的键值(key-value)对集合,适合存储对象,每个hash可以存储2的32次方-1个键值对(40多亿)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//设置值</span><br><span class="line">HSET liu age 23 sex 1</span><br><span class="line">//获取值</span><br><span class="line">HGET liu age/sex</span><br><span class="line">//获取所有值</span><br><span class="line">HGETALL liu</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>List(列表(有序))</p>
<ul>
<li>Redis列表时简单的字符串列表,按照插入顺序排列(类似于栈,先入栈的位于最底部),可以添加一个元素到列表的头部或尾部,每个列表最多可存储2的32次方-1个元素(40多亿)</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//设置值</span><br><span class="line">LPUSH array demo1</span><br><span class="line">LPUSH array demo2</span><br><span class="line">LPUSH array demo3</span><br><span class="line">LPUSH array demo4</span><br><span class="line">//获取值(获取从0到10的数据)</span><br><span class="line">LRANGE array 0 10</span><br></pre></td></tr></table></figure>
<ul>
<li>Set(集合(无序))<ul>
<li>Set是string类型的无序集合,通过哈希表实现,所以添加,删除,查找的复杂度都是O(1)(与数据量大小无关)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//设置值</span><br><span class="line">SADD cardid 653125</span><br><span class="line">SADD cardid 653126</span><br><span class="line">SADD cardid 653127</span><br><span class="line">SADD cardid 653128</span><br><span class="line">SADD cardid 653128</span><br><span class="line">//获取值</span><br><span class="line">SMEMBERS cardid</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>注意: 以上实例中 653128添加了两次,但是根据集合中元素的唯一性,第二次插入的元素将被忽略</p>
</blockquote>
<ul>
<li>zset(sorted set:有序集合)<ul>
<li>Redis zset和set一样也是string类型元素的集合,且不允许存在重复的成员,不同的是 每个元素都会关联一个double类型的分数,redis正是通过该分数来为集合中的成员进行从小到大的排序,zset的成员都是唯一的,但是分数是可以重复的</li>
<li>添加元素到集合,元素在集合中存在则更新对应score</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 设置值</span><br><span class="line">ZADD hobby 0 a</span><br><span class="line">ZADD hobby 1 b</span><br><span class="line">ZADD hobby 2 f</span><br><span class="line">ZADD hobby 2 e</span><br><span class="line"></span><br><span class="line">//获取值(获取从0开始到1000的数据)</span><br><span class="line">ZRANGEBYSCORE hobby 0  1000</span><br></pre></td></tr></table></figure>
<h3 id="Redis中的事务"><a href="#Redis中的事务" class="headerlink" title="Redis中的事务"></a>Redis中的事务</h3><ul>
<li>Redis中使用MULTI来开始一个事务,然后将多个命令入队到事务中,最后使用EXEC命令触发事务,一并执行事务中的所有命令 </li>
<li>事务相关的其他命令参见<a href="http://www.runoob.com/redis/redis-transactions.html" target="_blank" rel="noopener">这里</a></li>
</ul>
<h3 id="Redis中的高级操作"><a href="#Redis中的高级操作" class="headerlink" title="Redis中的高级操作"></a>Redis中的高级操作</h3><ul>
<li>使用<code>SAVE</code>命令创建当前数据库的备份,一般会在开启Redis服务器的位置保存</li>
<li>恢复数据只需要将备份文件(demp.rdp)移动到redis安装目录并启动服务即可</li>
<li>使用<code>config get requirepass</code>可以查看是否设置了密码验证,默认情况下为无密码,可以通过<code>config set requirepass &quot;new password&quot;</code>来修改密码,登陆时使用 <code>AUTH &quot;password&quot;</code>来进行登陆验证</li>
</ul>
<h3 id="Java使用Redis"><a href="#Java使用Redis" class="headerlink" title="Java使用Redis"></a>Java使用Redis</h3><ul>
<li>核心包<code>Jedis.jar</code></li>
<li>核心类<code>Jedis jedis = new Jedis(&quot;127.0.0.1&quot;);</code></li>
<li>连接池配置<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">JedisPoolConfig config = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line"><span class="comment">//  设置最大连接对象的个数</span></span><br><span class="line">config.setMaxTotal(<span class="number">10</span>);</span><br><span class="line"><span class="comment">//  设置最大等待时间</span></span><br><span class="line">config.setMaxWaitMillis(<span class="number">600</span>);</span><br><span class="line"><span class="comment">//  设置最大空闲时间</span></span><br><span class="line">config.setMaxIdle(<span class="number">400</span>);</span><br><span class="line">List&lt;JedisShardInfo&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">JedisShardInfo e = <span class="keyword">new</span> JedisShardInfo(<span class="string">"10.35.161.25"</span>, <span class="number">6379</span>);</span><br><span class="line">e.setPassword(<span class="string">"1234"</span>);</span><br><span class="line">list.add(e);</span><br><span class="line"><span class="comment">//  分别使用JedisPoolConfig对象和JedisShardInfo的list对象来构建ShardedJedisPool对象</span></span><br><span class="line">ShardedJedisPool pool = <span class="keyword">new</span> ShardedJedisPool(config, list);</span><br><span class="line"><span class="comment">//  使用ShardedJedisPool对象的getResource（）方法获取ShardedJedis对象</span></span><br><span class="line">ShardedJedis jedis = pool.getResource();</span><br><span class="line"><span class="comment">//  使用ShardedJedis对象的具体方法就可以访问redis数据库</span></span><br><span class="line">jedis.set(<span class="string">"hello"</span>, <span class="string">"world"</span>);</span><br><span class="line">System.out.println(jedis.get(<span class="string">"hello"</span>));</span><br><span class="line">pool.close();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Spring整合Redis"><a href="#Spring整合Redis" class="headerlink" title="Spring整合Redis"></a>Spring整合Redis</h3><ul>
<li>核心包<code>spring-data-redis.jar</code></li>
<li><p>xml配置文件详解</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入redis的属性文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"configure"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"locations"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:redis.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设置redis连接池的具体信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"poolConfigure"</span> <span class="attr">class</span>=<span class="string">"redis.clients.jedis.JedisPoolConfig"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdle"</span> <span class="attr">value</span>=<span class="string">"$&#123;maxIdle&#125;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxTotal"</span> <span class="attr">value</span>=<span class="string">"$&#123;maxTotal&#125;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxWaitMillis"</span> <span class="attr">value</span>=<span class="string">"$&#123;maxWaitMillis&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- redis的连接工厂 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"connectionFactory"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"org.springframework.data.redis.connection.jedis.JedisConnectionFactory"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"usePool"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hostName"</span> <span class="attr">value</span>=<span class="string">"$&#123;hostname&#125;"</span> /&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"port"</span> <span class="attr">value</span>=<span class="string">"$&#123;port&#125;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"timeout"</span> <span class="attr">value</span>=<span class="string">"$&#123;timeout&#125;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">ref</span>=<span class="string">"poolConfigure"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 创建RedisTemplate对象，来实现redis数据库中数据的具体操作 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"redisTemp"</span> <span class="attr">class</span>=<span class="string">"org.springframework.data.redis.core.RedisTemplate"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connectionFactory"</span> <span class="attr">ref</span>=<span class="string">"connectionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- userService实例对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"com.qfedu.service.impl.UserServiceImpl"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userDao"</span> <span class="attr">ref</span>=<span class="string">"userDao"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 构建userDao实例对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDao"</span> <span class="attr">class</span>=<span class="string">"com.qfedu.dao.impl.UserDaoImpl"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"redisTemp"</span> <span class="attr">ref</span>=<span class="string">"redisTemp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Dao详解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line">    <span class="comment">//  RedisTemplate redis的模板对象，该对象可以完成redis数据的具体操作</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;Serializable, Serializable&gt; redisTemp;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRedisTemp</span><span class="params">(RedisTemplate&lt;Serializable, Serializable&gt; redisTemp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.redisTemp = redisTemp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//  使用redisTemplate对象的execute方法来实现具体的操作</span></span><br><span class="line">        <span class="comment">//  该方法需要一个回调对象</span></span><br><span class="line">        redisTemp.execute(<span class="keyword">new</span> RedisCallback&lt;Object&gt;() &#123;</span><br><span class="line">            <span class="comment">//  在具体的回调方法中实现数据的持久化操作</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">doInRedis</span><span class="params">(RedisConnection connection)</span> <span class="keyword">throws</span> DataAccessException </span>&#123;</span><br><span class="line">                connection.set(</span><br><span class="line">                        redisTemp.getStringSerializer().serialize(user.getUid()),</span><br><span class="line">                        redisTemp.getStringSerializer().serialize(user.getName()));</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">(String uid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemp.execute(<span class="keyword">new</span> RedisCallback&lt;User&gt;() &#123;</span><br><span class="line">            <span class="comment">//  在具体的回调方法中实现数据的取值操作</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> User <span class="title">doInRedis</span><span class="params">(RedisConnection connection)</span> <span class="keyword">throws</span> DataAccessException </span>&#123;</span><br><span class="line">                <span class="keyword">byte</span>[] key = redisTemp.getStringSerializer().serialize(uid);</span><br><span class="line">                <span class="keyword">if</span>(connection.exists(key))&#123;</span><br><span class="line">                    <span class="keyword">byte</span>[] value = connection.get(key);</span><br><span class="line">                    User u = <span class="keyword">new</span> User();</span><br><span class="line">                    u.setUid(uid);</span><br><span class="line">                    u.setName(redisTemp.getStringSerializer().deserialize(value));</span><br><span class="line">                    <span class="keyword">return</span> u;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2018/09/17/Shiro/"></a><a class="next" href="/2018/09/17/Linux/"></a></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://yoursite.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Trtmu.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.1" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.1"></script></div></body></html>